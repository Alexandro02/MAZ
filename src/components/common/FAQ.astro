---
import AccordionItem from "@/src/components/common/AccordionItem.astro";

interface FaqItem {
  question: string;
  answer: string;
}

interface Props {
  faqs?: FaqItem[];
  image?: string;
  alt?: string;
}

const {
  faqs = [],
  image = "https://placehold.co/600x400?text=FAQ+Image",
  alt = "FAQ",
}: Props = Astro.props;
---

<section
  class="px-4 sm:px-6 md:px-12 lg:px-[6rem] xl:px-[12rem] py-12 md:py-20"
>
  <div class="flex flex-col md:flex-row gap-8 md:gap-12 items-center">
    <!-- Imagen -->
    <div class="w-full md:w-1/2">
      <img src={image} alt={alt} class="rounded-lg w-full" />
    </div>

    <!-- AcordeÃ³n -->
    <div class="w-full md:w-1/2 spave-y-4">
      {
        faqs.map(({ question, answer }) => (
          <AccordionItem question={question} answer={answer} />
        ))
      }
    </div>
  </div>

  <!-- Script para acordeones -->
  <script type="module" is:inline>
    const accordions = document.querySelectorAll(".accordion-item");

    accordions.forEach((item) => {
      const trigger = item.querySelector(".accordion-trigger");
      const content = item.querySelector(".accordion-content");
      const svg = trigger.querySelector("svg");

      trigger.addEventListener("click", () => {
        const expanded = trigger.getAttribute("aria-expanded") === "true";

        trigger.setAttribute("aria-expanded", (!expanded).toString());
        item.classList.toggle("open");

        if (!expanded) {
          content.style.maxHeight = content.scrollHeight + "px";
          svg.classList.add("rotate-180");
        } else {
          content.style.maxHeight = "0px";
          svg.classList.remove("rotate-180");
        }
      });
    });
  </script>
</section>
